# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================

# Application name (used in logs, emails, and 2FA setup)
APP_NAME=App Base

# Server port (Render sets this automatically in production)
PORT=8080

# Environment mode: development, production, or test
NODE_ENV=development


# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# MongoDB Atlas connection string
# Replace: username, password, cluster.example.mongodb.net, database-name, app-name
MONGODB_URI=mongodb+srv://username:password@cluster.example.mongodb.net/database-name?retryWrites=true&w=majority&appName=app-name


# ==============================================================================
# AUTHENTICATION & SECURITY
# ==============================================================================

# JWT Access Token Secret (generate using: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))")
ACCESS_TOKEN_SECRET=replace_with_random_generated_secret_at_least_32_chars_long

# JWT Refresh Token Secret (generate a different secret from access token)
REFRESH_TOKEN_SECRET=replace_with_different_random_generated_secret_at_least_32_chars_long

# Token expiration times (format: 20m, 1h, 7d, etc.)
ACCESS_TOKEN_EXPIRY=20m
REFRESH_TOKEN_EXPIRY=7d


# ==============================================================================
# REDIS CACHE CONFIGURATION
# ==============================================================================

# Enable or disable Redis caching (true/false)
CACHE_ENABLED=true

# Redis connection URL (supports local and cloud deployments)
REDIS_URL=redis://localhost:6379

# Cache cleanup service configuration
CACHE_CLEANUP_ENABLED=true
CACHE_CLEANUP_INTERVAL_HOURS=24
CACHE_CLEANUP_MIN_AGE_HOURS=2
CACHE_CLEANUP_MAX_KEYS_PER_RUN=500


# ==============================================================================
# FILE UPLOAD & COMPRESSION
# ==============================================================================

# Maximum request payload size (controls file upload limit)
MAX_REQUEST_SIZE=500mb

# Compression settings
COMPRESSION_MIN_SIZE=1024
COMPRESSION_MIN_RATIO=0.05

# Blocked file extensions (comma-separated, applies to upload and create endpoints)
BLOCKED_FILE_EXTENSIONS=.exe,.bat,.cmd,.scr,.vbs


# ==============================================================================
# YJS COLLABORATIVE EDITING
# ==============================================================================

# MongoDB collection name for storing Yjs documents
YJS_COLLECTION_NAME=yjs-documents

# Number of updates to batch before flushing to persistence layer
YJS_FLUSH_SIZE=100

# Milliseconds to wait before persisting changes (debounce delay)
YJS_DEBOUNCE_DELAY=2000

# Redis Pub/Sub scaling (only enable for multi-server deployments)
# For single server setups, leave this disabled
YJS_REDIS_ENABLED=false

# Redis key prefix for Yjs documents (required even if Redis disabled)
YJS_REDIS_PREFIX=yjs:

# Redis channel prefix for document synchronization (required even if Redis disabled)
YJS_REDIS_CHANNEL_PREFIX=yjs-doc:


# ==============================================================================
# RATE LIMITING
# ==============================================================================

# General API rate limiting (applies to /api/* routes)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000

# Authentication rate limiting (applies to /api/v1/auth/* routes)
RATE_LIMIT_AUTH_WINDOW_MS=60000
RATE_LIMIT_AUTH_MAX_REQUESTS=100


# ==============================================================================
# LOGGING
# ==============================================================================

# Log level (options: error, warn, info, http, verbose, debug, silly)
LOG_LEVEL=http


# ==============================================================================
# CORS CONFIGURATION
# ==============================================================================

# Allowed origins (comma-separated list)
ALLOWED_ORIGINS=http://localhost:8080,http://localhost:8082,http://localhost:8083,http://localhost:8088


# ==============================================================================
# EMAIL SERVICE (SMTP)
# ==============================================================================

# Enable or disable email service (true/false)
EMAIL_ENABLED=true

# SMTP server configuration
EMAIL_HOST=smtp.example.com
EMAIL_PORT=587
EMAIL_USER=your-email@example.com
EMAIL_PASS=your_email_password_or_app_password

# Email sender address
EMAIL_FROM=noreply@example.com

# Application URL (used in email links for verification, password reset, etc.)
APP_URL=http://localhost:8083 # Development (frontend URL)
